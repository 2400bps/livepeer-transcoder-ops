# working from these docs https://livepeer.readthedocs.io/en/latest/getting_started.html 
# I went with 17.04 ami-7b4d7900 on a t2.medium in us-east-1
# https://console.aws.amazon.com/ec2/home?region=us-east-1#launchAmi=ami-7b4d7900
# wanted to make sure we got at least golang-1.7

# needs a specially-built (I think) statically compiled version of ffmpeg
# from this repo https://github.com/livepeer/ffmpeg-static
# can grab the linux x64 binary from this url and move it into $PATH
cd
curl -s -L https://github.com/livepeer/ffmpeg-static/raw/master/bin/linux/x64/ffmpeg > ffmpeg
chmod 0755 ffmpeg
sudo chown root:root ffmpeg
sudo mv -i ffmpeg /usr/local/bin/

# Download livepeer and livepeer_cli from https://github.com/livepeer/go-livepeer/releases. 
# Choose the _darwin version for OS X and the _linux versions for Linux, and then untar them:
curl -s -L https://github.com/livepeer/go-livepeer/releases/download/0.1.14/livepeer_linux.tar > livepeer_linux.tar
tar xvfp livepeer_linux.tar
cd livepeer_linux/
./livepeer -rinkeby

# new address created 0xEAfEdD359d7D2B9Ca6F97054f76328064E0E26fC with pw: emigre smuggle lumbago


# Test net dashboard http://eth-testnet.livepeer.org
# install livepeer node from readme at https://github.com/livepeer/go-livepeer
sudo apt-get update
sudo apt-get install golang

# edit .profile:

  # edit the version number here as appropriate:
  export GOROOT="/usr/lib/go-1.6"
  export GOPATH="$HOME/goprojects"

  # set PATH so it includes user's private bin directories
  PATH="$HOME/bin:$HOME/.local/bin:$PATH:$GOPATH/bin"
  
mkdir goprojects

# ugh this isn't building right now, 
# just download livepeer_linux and livepeer_linux_cli from https://github.com/livepeer/go-livepeer/releases 
git clone git@github.com:livepeer/go-livepeer.git
cd go-livepeer
go get ./...
go build ./cmd/livepeer/livepeer.go

sudo apt-get install ffmpeg

# install local ethereum node, https://github.com/ethereum/go-ethereum/wiki/Building-Ethereum
sudo apt-get install software-properties-common
sudo add-apt-repository -y ppa:ethereum/ethereum
sudo apt-get update
sudo apt-get install ethereum
geth account new
# Address: {eee665a9f5bcb3a3e57c66571bbf144ab308d1cf} and pw: emigre smuggle lumbago
mkdir ~/.lpGeth
wget http://eth-testnet.livepeer.org/lptestnet.json
# if it complains about "field Genesis.number" delete the "number" field from lptestnet.json
geth --datadir ~/.lpGeth init lptestnet.json
# run geth in a screen session
screen
geth --datadir ~/.lpGeth --networkid 858585 --bootnodes "enode://080ebca2373d15762c29ca8d85ddc848f10a7ffc745f7110cacba4694728325d645292cb512d7168323bd0af1650fca825ff54c8dba20aec8878498fae3ff3c6@18.221.67.74:30303"
# exit the screen session
# run livepeer node in another screen session
screen
chmod 0755 livepeer_linux 
./livepeer_linux -testnet
# exit the screen session
./livepeer_cli_linux

# get ether from crypto faucet in dashboard if necessary http://eth-testnet.livepeer.org
# copy address of ether wallet display in livepeer_cli_linux at "Account Eth Addr"
# paste it into a secret github gist, and copy the url of that gist into the faucet above
# and select to get new ether

# back in the livepeer_cli_linux, run "1." to get node status to see updated Eth balance

# now get some test LivePeer tokens through the CLI, option "11"
# check the token balance using the CLI
# update with notes inside project dir
